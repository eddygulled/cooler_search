<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cooler</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">

</head>
<style>
    .mapboxgl-marker .mapboxgl-marker-anchor-center {
        width: 20px;
        height: 20px;
        cursor: pointer;
    }

    .mapboxgl-popup {
        max-width: 300px;
    }

    .mapboxgl-popup-content {
        text-align: center;
        font-family: 'Open Sans', sans-serif;
    }
    #fixed-date{
        position: fixed;
        bottom: 0px;
        right: 0px;
        z-index: 3;
        padding: 3px;
        font-family: candara;
        font-size: 15px;
    }
</style>

<body>
    <div class="container-fluid bg-light p-3">
        <div class="row">
            <div class="col-4">
                <a class="navbar-brand" href="#">Cooler Verification Mapping</a>
            </div>
            <div class="col-sm-12 col-md-4">
                <select name="" id="time_jump" class="form-control mr-sm-2 m-1">
                    <option value="0">Last Scanned</option>

                    <option value="1">past 1 week</option>
                    <option value="2">past 2 weeks</option>
                    <option value="3">past 3 weeks</option>
                    <option value="4">past 4 weeks</option>

                </select>

            </div>
            <div class="col-sm-12 col-md-4">
                <select name="" id="center" class="form-control mr-sm-2 m-1">
                    <option value="0">Branch</option>
                    <option value='KIMARO TRADERS KD'>KIMARO TRADERS KD</option>
                    <option value='MAKETE OCCD'>MAKETE OCCD</option>
                    <option value='AFROEURO OCCD'>AFROEURO OCCD</option>
                    <option value='CHANIKA SSD'>CHANIKA SSD</option>
                    <option value='TEMEKE SSD STOCKIST'>TEMEKE SSD STOCKIST</option>
                    <option value='CHALINZE SSD RETAIL'>CHALINZE SSD RETAIL</option>
                    <option value='MUSTAFA OCCD'>MUSTAFA OCCD</option>
                    <option value='BUGURUNI SSD'>BUGURUNI SSD</option>
                    <option value='MSHEWE BUSINESS CENTER'>MSHEWE BUSINESS CENTER</option>
                    <option value='ITUMBA OCCD-ILEJE'>ITUMBA OCCD-ILEJE</option>
                    <option value='SANGA OCCD'>SANGA OCCD</option>
                    <option value='EXODUS OCCD'>EXODUS OCCD</option>
                    <option value='MUSHI OCCD'>MUSHI OCCD</option>
                    <option value='KIBAMBA SSD RETAIL'>KIBAMBA SSD RETAIL</option>
                    <option value='TABATA SSD'>TABATA SSD</option>
                    <option value='KINONDONI SSD RETAILER'>KINONDONI SSD RETAILER</option>
                    <option value='SHANGWE MDC'>SHANGWE MDC</option>
                    <option value='SAHARA SHOPPING-KEY DISTRIBUTOR'>SAHARA SHOPPING-KEY DISTRIBUTOR</option>
                    <option value='MWENGE SOUTH KD'>MWENGE SOUTH KD</option>
                    <option value='BAKIRI & SONS CO. KD MASASI'>BAKIRI & SONS CO. KD MASASI</option>
                    <option value='SFK OCCD'>SFK OCCD</option>
                    <option value='MBEYA URBAN SSD RETAILER'>MBEYA URBAN SSD RETAILER</option>
                    <option value='TEGETA-BAGAMOYO SSD'>TEGETA-BAGAMOYO SSD</option>
                    <option value='DSD MPANDA'>DSD MPANDA</option>
                    <option value='E.MAHENGE KEY DISTRIBUTOR (VWAWA )'>E.MAHENGE KEY DISTRIBUTOR (VWAWA )</option>
                    <option value='KIBO EMPIRE OCCD'>KIBO EMPIRE OCCD</option>
                    <option value='KEY ACCOUNTS'>KEY ACCOUNTS</option>
                    <option value='KOROGWE SSD RETAIL'>KOROGWE SSD RETAIL</option>
                    <option value='ASSENGA ASSOCIATES CO. LTD'>ASSENGA ASSOCIATES CO. LTD</option>
                    <option value='HELENA MBWINGA OCCD'>HELENA MBWINGA OCCD</option>
                    <option value='DSD'>DSD</option>
                    <option value='MKURANGA SSD'>MKURANGA SSD</option>
                    <option value='KIMBINYIKO INTERPRISE LTD OCCD'>KIMBINYIKO INTERPRISE LTD OCCD</option>
                    <option value='SILVER OCCD'>SILVER OCCD</option>
                    <option value='TANGA MJINI SSD RETAIL'>TANGA MJINI SSD RETAIL</option>
                    <option value='MANYUNYU TRADERS LTD -KD'>MANYUNYU TRADERS LTD -KD</option>
                    <option value='MWAMPETELE OCCD '>MWAMPETELE OCCD </option>
                    <option value='NEW MILLENIUM DEPORT MDC'>NEW MILLENIUM DEPORT MDC</option>
                    <option value='KIKOKO COMPANY LTD-KEY DISTRIB'>KIKOKO COMPANY LTD-KEY DISTRIB</option>
                    <option value='MWASIKILI OCCD'>MWASIKILI OCCD</option>
                    <option value='MBEYA URBAN SSD STOCKIST'>MBEYA URBAN SSD STOCKIST</option>
                    <option value='MSELEM KEY DISTR-SUMBAWANGA'>MSELEM KEY DISTR-SUMBAWANGA</option>
                    <option value='TUNDUMA SSD RETAIL'>TUNDUMA SSD RETAIL</option>
                    <option value='MGIMWA OCCD'>MGIMWA OCCD</option>
                    <option value='ZENJ ENTERPRISES OCCD'>ZENJ ENTERPRISES OCCD</option>
                    <option value='EMMA KIBURUNGWA'>EMMA KIBURUNGWA</option>
                    <option value='LINDI SSD'>LINDI SSD</option>
                    <option value='CHALINZE SSD STOCKIST'>CHALINZE SSD STOCKIST</option>
                    <option value='TANGA MJINI SSD STOCKIST'>TANGA MJINI SSD STOCKIST</option>
                    <option value='SAMWEL OCCD'>SAMWEL OCCD</option>
                    <option value='GREYSON KEY DISTRIBUTOR'>GREYSON KEY DISTRIBUTOR</option>
                    <option value='MTWARA SSD RETAIL'>MTWARA SSD RETAIL</option>
                    <option value='FURAHA OLIVER GIFT KEY DISTRIBUTOR'>FURAHA OLIVER GIFT KEY DISTRIBUTOR</option>
                    <option value='SMART STORE OCCD'>SMART STORE OCCD</option>
                    <option value='IFAKARA SSD'>IFAKARA SSD</option>
                    <option value='POPATI ASSOCIATE COMPANY LTD OCCD'>POPATI ASSOCIATE COMPANY LTD OCCD</option>
                    <option value='HUBERT KIMEI OCCD'>HUBERT KIMEI OCCD</option>
                    <option value='NEEVA OCCD'>NEEVA OCCD</option>
                    <option value='EMMANUEL OCCD'>EMMANUEL OCCD</option>
                    <option value='KOROGWE SSD STOCKIST'>KOROGWE SSD STOCKIST</option>
                    <option value='UFUNUO GAMA OCCD'>UFUNUO GAMA OCCD</option>
                    <option value='SIWALE OCCD'>SIWALE OCCD</option>
                    <option value='KILOSA HAJI MDC'>KILOSA HAJI MDC</option>
                    <option value='SONGEA SSD'>SONGEA SSD</option>
                    <option value='OMAKA CO LTD OCCD'>OMAKA CO LTD OCCD</option>
                    <option value='NJOMBE SSD RETAIL'>NJOMBE SSD RETAIL</option>
                    <option value='ROY MDC'>ROY MDC</option>
                    <option value='FK & CF INVESTMENT COMPANY'>FK & CF INVESTMENT COMPANY</option>
                    <option value='FURAHA D. MUHAGAMA OCCD'>FURAHA D. MUHAGAMA OCCD</option>
                    <option value='KIBAMBA SSD STOCKIST'>KIBAMBA SSD STOCKIST</option>
                    <option value='AWAMU STORE KD'>AWAMU STORE KD</option>
                    <option value='MATUNDASI (MDC)'>MATUNDASI (MDC)</option>
                    <option value='MAKONGOLOSI (MDC)'>MAKONGOLOSI (MDC)</option>
                    <option value='CHUNYA (MDC) - NDELWA'>CHUNYA (MDC) - NDELWA</option>
                    <option value='SHAYO MDC - KASUMULU'>SHAYO MDC - KASUMULU</option>
                    <option value='SIMIKE GENERAL SUPPLIES'>SIMIKE GENERAL SUPPLIES</option>
                    <option value='SUNLIT INVESTMENT CO.LTD (KEY DISTR'>SUNLIT INVESTMENT CO.LTD (KEY DISTR</option>
                    <option value='LUFILYO MDC'>LUFILYO MDC</option>
                    <option value='ELIAS SANGA OCCD'>ELIAS SANGA OCCD</option>
                    <option value='M.M GULEKELA OCCD'>M.M GULEKELA OCCD</option>
                    <option value='BENTAS OCCD'>BENTAS OCCD</option>
                    <option value='EDDY MDC'>EDDY MDC</option>
                    <option value='RAHA LEO OCCD'>RAHA LEO OCCD</option>
                    <option value='KUMBULU MDC'>KUMBULU MDC</option>
                    <option value='MURAGANE ENTERPRISES OCCD'>MURAGANE ENTERPRISES OCCD</option>
                    <option value='LUPA MDC'>LUPA MDC</option>
                    <option value='BRIGHT FUTURE CO.LTD'>BRIGHT FUTURE CO.LTD</option>
                    <option value='THE MOONLIGHT COMPANY LTD'>THE MOONLIGHT COMPANY LTD</option>
                    <option value='MAKAMBAKO STORE MDC'>MAKAMBAKO STORE MDC</option>
                    <option value='MTWARA SSD STOCKIST'>MTWARA SSD STOCKIST</option>
                    <option value='NJOMBE SSD STOCKIST'>NJOMBE SSD STOCKIST</option>
                    <option value='MWAKILEMA'>MWAKILEMA</option>
                    <option value='MIRAAZI OCCD'>MIRAAZI OCCD</option>
                    <option value='LEOKADIA CHAULA'>LEOKADIA CHAULA</option>
                    <option value='MWAKILEMA MDC'>MWAKILEMA MDC</option>
                    <option value='SANGAMBI MDC'>SANGAMBI MDC</option>
                    <option value='TUNDUMA SSD STOCKIST'>TUNDUMA SSD STOCKIST</option>
                    <option value='MBUYUNI KUNDUCHI'>MBUYUNI KUNDUCHI</option>
                    <option value='MBEPERA MDC'>MBEPERA MDC</option>
                    <option value='TEMEKE SSD RETAIL'>TEMEKE SSD RETAIL</option>

                </select>

                <input type="text" id="rad_name" class="form-control mr-sm-2 m-1" placeholder="Sales REP"
                    style="display: none;">
            </div>

            <div class="col-sm-12">
                <span class="btn m-1 bg-white" id="input_toggle">sales rep</span>
                <button class="btn m-1 bg-white" id="filter">load</button>
            </div>
        </div>
    </div>

    <div class="container-fluid bg-dark">
        <div class="row">
            <div id="map" class="col-12">

            </div>
        </div>
    </div>

    <div id="fixed-date" class="bg-light text-dark"> last update: {{data_last_update}}</div>

</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
    crossorigin="anonymous"></script>
<script src="https://releases.jquery.com/git/jquery-3.x-git.js"></script>
<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

<script>
    // init sales reps names
    const RAD_NAMES = ["ALEX JACKSON MICHAEL", "BENJAMIN JOSEPH SHILINGO", "DIXON ALEX KOMBE", "MOHAMED SAID KIGEDELE", "SALUM MOHAMED MANGALA", "NGEREZA RAMADHANI NGEREZA", "OMARY ADAM MSAKATI", "JUMANNE ISSA NAVALI", "GIDEON ELIETH", "DOTO MAKELEMO MOSES", "AUGUSTINO ALPHONCE MASSAE", "VIOLETH MOSES MWAISELO", "AUGUSTINE BENNET KAKOROZYA", "BEATRICE PIUS NCHIMBI (VACANT)", "RAMADHAN HALFAN MILANZI", "GLORY PANCRAS TESHA", "BENSON SOSPETER KIBONYE", "TUMUHEREZE JULIUS MUGISHA", "KEVIN EBENEZER MUNUO", "OTHMAN OMAR ABDALLAH", "JOSEPH MBOTWA", "PAUL ERNEST ALAME", "ANITHA CYPRIAN NDIBALEMA", "ELINARA JOHNSON MPUTA", "GEORGE AIDANI NDUNGURU", "JOYCE PHILEMON MATIKO", "SYLVESTER MASEGEDO CLEMENT", "NSAJIGWA SWEBE MWAKIBIBI", "BENJAMIN ADAMSON MASIKA", "REVOCATUS MAYALA MAKELEMO", "EVANCE BAZILI TUMAINI", "SCOLA MWANDANJI ABRAHAMU", "HELENA JULIUS KITOLO", "BRIGHT GODBLESS KIMARO", "FATMA HAFIDH NASSOR", "LIDYA JONAS LUKUMAY (VACANT)", "STEVEN KAHEPA", "TEMEKE SSD RETAIL (VACANT)", "BENEDICT JOSEPH MMBANDO", "PASCAZIA JOHN MANG'ULA", "FLORA KAJUNGU MAYONGA", "IPYANA JOHN MWAKIFUNA", "JOHN MALUNGU", "DAVID ALLY KALINGA", "OFORO JUSTIN MOSHI", "KIBO EMPIRE OCCD(VACANT)", "SAID ATHUMAN MATOLA", "REHEMA IBRAHIM  NAWAB", "JANETH PETER MWAKASEKELE", "PENDO LEONARD KIWIA", "HOSEA WILIAM KIYOLA", "IDRISA FADHIL HASSAN", "FRANCIS ALEXANDER DAGAA", "SAMWEL KIRUVUKO MCHOMVU", "ALOYCE BONIFACE MKWAMA", "GRAY ROBERT SINDO", "ADELGORTH OTMARY LUPINDU", "TABU ALLY JAEKA ", "JACQUELINE LUDOVICK KWELA", "MAGDALENA MAROLI NGOWI", "SALUM HUSSEIN", "ANNA CHARLES CHALINZE", "MUSSA MASHAURI MGATA", "IVON ANTHONY SANGA", "BAKARI MOHAMED BAKARI", "JOSEPHAT MGENDERA", "RAPHAEL JACKSON MWANJOKA", "SARAH MARTIN CHUWA", "ELLEN JAFFU", "SELEMANI MOHAMED CHAWILY", "VALENTINA MASSAWE", "DENIS ALFRED HAULE", "RAPHAEL BINGSON MWANSILE", "JOYCE MHINA SETEBE", "SIFA SAID SALUM(VACANT)", "SAMWEL JOSEPH SAMWEL", "EZEKIEL WILSON MSOMBA", "MORGAN GIVEN SHAYO", "NELSON ANDREW GWAJA ", "BENNY FRED MATENI", "OMARY MUSTAFA KAFUMU", "AMOS BONIPHACE KOLLA(VACANT)", "RHODA JEREMIAH SANGIWA(VACANT)", "MOSES SIMON NTANDU", "MOHAMED SAID SECHAMBO", "LATIFA MOHAMED MBONDE", "MWAJUMA RAMADHANI MBAROUK", "YUSUPH KHAMISI SHABAN", "DISMAS COSMAS VEMA", "ALEX BERNARDI KIBUGA", "ZAFANANA BAKARI MAYENGULA", "ELIJAH JACOB MWAVEYA(VACANT)", "ISAYA SOKOLO", "MAGRETH ROBBINSONY NSEKELA", "ROBERT JACKSON WEGA", "JENIPHA EVARIST NDAKIDEMI", "ALI HASSAN ALI", "FURAHA REVOCATUS KALOMBE", "EDSON PATRICK MLAPONI", "TABATA SSD(VACANT)", "WALTER GABRIEL MINZANI", "KELVIN RICHARD KAHABUKA", "EZEKIEL AMBAKISYE MWAITULO", "PHESTO KENNEDY CHACHA", "ATUPELE SAIMON MWAKABANGA", "EMMANUEL GODFREY MASSEY", "LINUS OSCAR NGOJE", "MASAGA NUNGWANA SIZYA", "HADIJA NASSORO NKONDO", "DANIEL TLUWAI MATIA", "KELVIN TARIMO", "JOSEPH JACOB NGULIGWA", "HASSANI HAMISI OMARI(VACANT)", "DANIEL PROTAS CHALE", "ISRAEL LAITON MWASYALINGA", "BENARD MDENDEMI", "NAFTAL EMANUEL NAFTAL", "ALLY MOHAMED ALLY", "LAURENT JOHN MDONG'ALA", "ADENI MATHIAS KASANGA", "ROJAS CLEVER MWANKWASYA", "LUDOVICK SYLVESTER IGOGO", "ZUWENA ANTHONY MAKURU", "ERICK MARCO FRANK", "BRAYSON WILBARD AKYOO", "LULU PETER MUGA", "WINIFRIDA KISANKO SANGA", "ABDUL EVACATUS MAGONO", "BARAKA SIMON MWAILAKALE", "CHARLES LUCAS MWAYUNGU", "PASCAL JOHN MWINGIRA", "WALTER BELLINGTONE KIWOLI", "JACQUELINE GERALD RIMOY", "EMMANUEL DOTTO NKOBA", "ALI HAJI ALI", "BONIVENTURE REVOCATUS SANGU (VACANT)", "EDGER BENJAMIN LWIWA", "BARAKA MPINGA", "PHILBERT RAPHAEL KATANGA", "BARAKA JACOB MTUI", "CONSOLATA PASCHAL MAYOKOLO", "JUMA RASHID JUMA", "CHRISTOPHER JISTON MTANDALA", "SIMON MAKAYA MTIMBA", "MUHSIN JAFARY BOI", "OMARY SHEGHERE MGONJA", "EVEREST YEKONIA ARON", "HUMPHREY EMMANUEL NIGANYA", "ALI UBWA MDOWE", "FLAVIAN JOSEPH BENKU", "PAUL METHOD MLOKA", "OLIVA MICHAEL MATANILA", "ANDREA FILLINGSON KAYUNI", "DENIS SABINI TEMU", "ABASY MWAIPOSYA", "ZAINABU ADAM MWANSELE", "LAWRENCE JOHN MWAKYONDE", "ALLY MUSTAPHA SAPI", "NENGELALE MCHARO", "MWASI AYOUB MARIJANI", "ALLEN MORIS MDULLA", "VUAI JABIR VUAI", "BRIAN PAUL STAMBULI (VACANT)", "OMARY JUMA NGULULU", "MWAJUMA ABDALLAH SAIDI", "SALUM HAMAD MUHANGA", "APSA ALLY RASHIDI", "HENELICKO BUCHARD MJUNI", "ISABELLA FRED SHAYO", "LUCKNESS EXAUD LYIMO", "JOHN LABAN MGINI", "LUSUNGU JAMES MAPILE", "HAWA RAJAB ALLY", "AMBELE ELIEZA BUGALI", "ERICK FRANCIS RAMADHANI", "SELAPIUS EWALDO NYALUSI", "STEVEN NORBERT STEVEN", "MEMMY GEORGE MAKAME", "ROBERT JOAS MSHANA", "IRENE MARTIN MUSHI", "SABURERE PANJISON ALOYS", "MWANAIDI BASHIRI MRUMA", "AMBAKISYE ELIEZA NGONDYA", "ALI MSELEM MNGWALI", "DUDE MOHAMED HIJA", "ONESMO OSCAR HANTA", "SHOMARI ALLY RAJAB", "KULWA PASCHAL IHOFU", "SALEH MBEGA", "DONALD MATHIAS MAKONDA", "JACOB PRIMIUS KAMGISHA", "ALFRED JAMES MTOI", "OTHMAN FAKI TWAHIR", "JOSEPH AUGUSTINO MLAY (VACANT)", "SADIKI SELEMANI ANZURUNI", "CHRISTA SAMSON NGONYANI", "DICKSON DEUS MWIJAGE", "ABDULRAHMAN DAU HAJI", "FRANK GERWIN MWONJA", "CHRISTINE MWANGOSI"];

    var data;
    try {
        data = JSON.parse("{{row_list | escapejs}}")
    } catch {
        // ??
    }
</script>

<script>

    var search_state = 0;

    function input_toggle() {
        var rad_input = document.getElementById("rad_name");
        var center_input = document.getElementById("center");
        if (center_input.style.display === "none") {
            center_input.style.display = "block";
            rad_input.style.display = "none";
            document.getElementById("input_toggle").innerHTML = "Sales Rep";
            search_state = 0;
        } else {
            rad_input.style.display = "block";
            center_input.style.display = "none";
            document.getElementById("input_toggle").innerHTML = "Branch";
            search_state = 1;
        }
    }


    if (localStorage.getItem("search_state") != null) {
        search_state = localStorage.getItem("search_state");
        search_state = parseInt(search_state)
        if (search_state == 1) {
            document.getElementById("rad_name").value = localStorage.getItem("center");
            document.getElementById("rad_name").style.display = "block";
            document.getElementById("center").style.display = "none";
            document.getElementById("input_toggle").innerHTML = "Branch";
        }
    }

    document.getElementById("input_toggle").onclick = function () {
        input_toggle();
    }

    var init_center = null;
    var init_time = null;
    // inpect local storage
    if (localStorage.getItem("center") == undefined) {

    } else {
        init_center = localStorage.getItem("center")
        init_time = localStorage.getItem("time_jump")
    }

    var map = null;
    $(document).ready(function () {

        $("#rad_name").autocomplete({
            source: RAD_NAMES
        });

        // initialize boxes
        if (init_center != null && init_time != null) {
            $("#center").val(init_center)
        }

        $("#map").css({
            "height": (innerHeight - 70) + "px"
        })


        mapboxgl.accessToken = 'pk.eyJ1IjoidHJhY3llZGRpZSIsImEiOiJjbDl3bnpjMHgwMmhsM3dwajdkY3ptYjhrIn0.il8kQAUFfJ6QLGkVH8GM5g';
        map = new mapboxgl.Map({
            container: 'map', // container ID

            style: 'mapbox://styles/mapbox/streets-v11',
            center: [39.178326, -6.776012],
            zoom: 10,
            projection: 'globe'
        });

        map.on('style.load', () => {
            map.setFog({});
        });


        if (data != undefined) {
            for (var i = 0; i < data.length; i++) {
                var longs = parseFloat(data[i].longitude);
                if (longs == NaN || !longs) { long = 0 }
                var lat = parseFloat(data[i].latitude);
                if (lat == NaN || !lat) { lat = 0 }
                var coordinates = [longs, lat]
                new mapboxgl.Marker({ color: 'red', rotation: 0 })
                    .setLngLat(coordinates)
                    .setPopup(
                        new mapboxgl.Popup({ offset: 25 }) // add popups
                            .setHTML(
                                "<div class='card'> " +
                                "<div class='card-body'>" +
                                "<table class='table'>" +
                                "<tr>" +
                                "<th> Outlet Number</th>" +
                                "<td>" + data[i].outlet_number + "</td></tr>" +
                                "<th> Outlet Name</th>" +
                                "<td>" + data[i].outlet_name + "</td></tr>" +
                                "<th> Mobile Number</th>" +
                                "<td>" + data[i].mobile_number + "</td></tr>" +
                                "<th> Outlet Location</th>" +
                                "<td>" + data[i].outlet_location + "</td></tr>" +
                                "<th> RAD</th>" +
                                "<td>" + data[i].rad + "</td></tr>" +
                                "<th> ASM </th>" +
                                "<td>" + data[i].asm + "</td></tr>" +
                                "<th> Last Scanned </th>" +
                                "<td>" + data[i].last_scanned + "</td></tr>" +
                                "</tr>" +
                                "</table>" +
                                "</div> </div>"
                            )
                    )
                    .addTo(map);
            }
        }
    });

    // // event triggers
    document.getElementById("filter").onclick = function () {
        console.log("err");
        $_center = $("#center").val();
        $_time_jump = $("#time_jump").val();

        if (search_state == 1) {
            $_center = $("#rad_name").val();
            if (($_center != 0 || $center != '') && $_time_jump != 0) { window.location.href = "/cvm/" + $_center + "/" + $_time_jump; localStorage.setItem("center", $_center); localStorage.setItem("time_jump", $_center) }
            localStorage.setItem("search_state", search_state);
        } else {
            localStorage.setItem("search_state", 0);
            if (($_center != 0 || $center != '') && $_time_jump != 0) { window.location.href = "/cvm/" + $_time_jump + "/" + $_center; localStorage.setItem("center", $_center); localStorage.setItem("time_jump", $_center) }
        }


    };
</script>



</html>